// <auto-generated />
using System;
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Infrastructure;
using Microsoft.EntityFrameworkCore.Storage.ValueConversion;
using Npgsql.EntityFrameworkCore.PostgreSQL.Metadata;
using ProjetSessionBackend.Core.Models;
using ProjetSessionBackend.Core.Models.Entities;
using ProjetSessionBackend.Core;

#nullable disable

namespace ProjetSessionBackend.Core.Migrations
{
    [DbContext(typeof(DatabaseContext))]
    partial class DatabaseContextModelSnapshot : ModelSnapshot
    {
        protected override void BuildModel(ModelBuilder modelBuilder)
        {
#pragma warning disable 612, 618
            modelBuilder
                .HasAnnotation("ProductVersion", "7.0.0")
                .HasAnnotation("Relational:MaxIdentifierLength", 63);

            NpgsqlModelBuilderExtensions.HasPostgresEnum(modelBuilder, "order_status", new[] { "OPEN", "PREPARING", "PICK-UP", "SHIPPED", "PAYED", "ARCHIVED" });
            NpgsqlModelBuilderExtensions.HasPostgresEnum(modelBuilder, "payment_method", new[] { "CASH", "DEBIT", "CREDIT" });
            NpgsqlModelBuilderExtensions.HasPostgresEnum(modelBuilder, "user_type", new[] { "EMPLOYEE", "MANAGER", "ADMIN", "PRESIDENT" });
            NpgsqlModelBuilderExtensions.UseIdentityByDefaultColumns(modelBuilder);

            modelBuilder.Entity("ProjetSessionBackend.Core.Client", b =>
                {
                    b.Property<int>("ClientId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasColumnName("client_id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<int>("ClientId"));

                    b.Property<string>("Address")
                        .HasColumnType("character varying")
                        .HasColumnName("address");

                    b.Property<string>("CardName")
                        .HasColumnType("character varying")
                        .HasColumnName("card_name");

                    b.Property<string>("CardNumber")
                        .HasColumnType("character varying")
                        .HasColumnName("card_number");

                    b.Property<DateTime?>("CreatedAt")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("timestamp without time zone")
                        .HasColumnName("created_at")
                        .HasDefaultValueSql("now()");

                    b.Property<string>("Cvv")
                        .HasColumnType("character varying")
                        .HasColumnName("cvv");

                    b.Property<string>("ExpiryDate")
                        .HasColumnType("character varying")
                        .HasColumnName("expiry_date");

                    b.Property<int?>("PersonId")
                        .HasColumnType("integer")
                        .HasColumnName("person_id");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp without time zone")
                        .HasColumnName("updated_at");

                    b.Property<int?>("UserId")
                        .HasColumnType("integer")
                        .HasColumnName("user_id");

                    b.HasKey("ClientId")
                        .HasName("pk_client_id");

                    b.HasIndex(new[] { "PersonId" }, "client_person_id_key")
                        .IsUnique();

                    b.HasIndex(new[] { "UserId" }, "client_user_id_key")
                        .IsUnique();

                    b.ToTable("client", (string)null);
                });

            modelBuilder.Entity("ProjetSessionBackend.Core.Menu", b =>
                {
                    b.Property<int>("MenuId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasColumnName("menu_id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<int>("MenuId"));

                    b.Property<DateTime?>("CreatedAt")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("timestamp without time zone")
                        .HasColumnName("created_at")
                        .HasDefaultValueSql("now()");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasColumnType("character varying")
                        .HasColumnName("name");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp without time zone")
                        .HasColumnName("updated_at");

                    b.HasKey("MenuId")
                        .HasName("pk_menu_id");

                    b.ToTable("menu", (string)null);
                });

            modelBuilder.Entity("ProjetSessionBackend.Core.MenuItem", b =>
                {
                    b.Property<int>("MenuItemId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasColumnName("menu_item_id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<int>("MenuItemId"));

                    b.Property<bool?>("Available")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasColumnName("available")
                        .HasDefaultValueSql("true");

                    b.Property<DateTime?>("CreatedAt")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("timestamp without time zone")
                        .HasColumnName("created_at")
                        .HasDefaultValueSql("now()");

                    b.Property<string>("Description")
                        .HasColumnType("text")
                        .HasColumnName("description");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasColumnType("character varying")
                        .HasColumnName("name");

                    b.Property<decimal?>("Price")
                        .ValueGeneratedOnAdd()
                        .HasPrecision(10, 2)
                        .HasColumnType("numeric(10,2)")
                        .HasColumnName("price")
                        .HasDefaultValueSql("0");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp without time zone")
                        .HasColumnName("updated_at");

                    b.HasKey("MenuItemId")
                        .HasName("pk_meal_id");

                    b.ToTable("menu_item", (string)null);
                });

            modelBuilder.Entity("ProjetSessionBackend.Core.MenuMenuItem", b =>
                {
                    b.Property<int>("MenuItemId")
                        .HasColumnType("integer")
                        .HasColumnName("menu_item_id");

                    b.Property<int>("MenuId")
                        .HasColumnType("integer")
                        .HasColumnName("menu_id");

                    b.HasKey("MenuItemId", "MenuId")
                        .HasName("pk_menu_menu_item");

                    b.HasIndex("MenuId");

                    b.ToTable("menu_menu_item", (string)null);
                });

            modelBuilder.Entity("ProjetSessionBackend.Core.Order", b =>
                {
                    b.Property<int>("OrderId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasColumnName("order_id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<int>("OrderId"));

                    b.Property<int?>("ClientId")
                        .HasColumnType("integer")
                        .HasColumnName("client_id");

                    b.Property<DateTime?>("CreatedAt")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("timestamp without time zone")
                        .HasColumnName("created_at")
                        .HasDefaultValueSql("now()");

                    b.Property<decimal?>("Subtotal")
                        .ValueGeneratedOnAdd()
                        .HasPrecision(20, 2)
                        .HasColumnType("numeric(20,2)")
                        .HasColumnName("subtotal")
                        .HasDefaultValueSql("0.0");

                    b.Property<decimal?>("Total")
                        .ValueGeneratedOnAdd()
                        .HasPrecision(20, 2)
                        .HasColumnType("numeric(20,2)")
                        .HasColumnName("total")
                        .HasDefaultValueSql("0.0");

                    b.Property<decimal?>("TpsValue")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("numeric")
                        .HasColumnName("tps_value")
                        .HasDefaultValueSql("5");

                    b.Property<decimal?>("TvqValue")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("numeric")
                        .HasColumnName("tvq_value")
                        .HasDefaultValueSql("9.975");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp without time zone")
                        .HasColumnName("updated_at");

                    b.HasKey("OrderId")
                        .HasName("pk_order_id");

                    b.HasIndex(new[] { "ClientId" }, "order_client_id_key")
                        .IsUnique();

                    b.ToTable("order", (string)null);
                });

            modelBuilder.Entity("ProjetSessionBackend.Core.Person", b =>
                {
                    b.Property<int>("PersonId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasColumnName("person_id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<int>("PersonId"));

                    b.Property<string>("Email")
                        .HasColumnType("text")
                        .HasColumnName("email");

                    b.Property<string>("Firstname")
                        .HasColumnType("text")
                        .HasColumnName("firstname");

                    b.Property<string>("Lastname")
                        .HasColumnType("text")
                        .HasColumnName("lastname");

                    b.Property<string>("Phone")
                        .HasColumnType("text")
                        .HasColumnName("phone");

                    b.HasKey("PersonId")
                        .HasName("pk_person_id");

                    b.ToTable("person", (string)null);
                });

            modelBuilder.Entity("ProjetSessionBackend.Core.Restaurant", b =>
                {
                    b.Property<int>("RestaurantId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasColumnName("restaurant_id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<int>("RestaurantId"));

                    b.Property<string>("Address")
                        .IsRequired()
                        .HasColumnType("character varying")
                        .HasColumnName("address");

                    b.Property<int?>("MenuId")
                        .HasColumnType("integer")
                        .HasColumnName("menu_id");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasColumnType("character varying")
                        .HasColumnName("name");

                    b.HasKey("RestaurantId")
                        .HasName("pk_restaurant_id");

                    b.HasIndex(new[] { "MenuId" }, "restaurant_menu_id_key")
                        .IsUnique();

                    b.ToTable("restaurant", (string)null);
                });

            modelBuilder.Entity("ProjetSessionBackend.Core.Role", b =>
                {
                    b.Property<int>("RoleId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasColumnName("role_id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<int>("RoleId"));

                    b.Property<string>("Name")
                        .HasColumnType("character varying")
                        .HasColumnName("name");

                    b.HasKey("RoleId")
                        .HasName("pk_role_id");

                    b.ToTable("role", (string)null);

                    b.HasData(
                        new
                        {
                            RoleId = 1,
                            Name = "Admin"
                        },
                        new
                        {
                            RoleId = 2,
                            Name = "Client"
                        },
                        new
                        {
                            RoleId = 3,
                            Name = "Employee"
                        });
                });

            modelBuilder.Entity("ProjetSessionBackend.Core.User", b =>
                {
                    b.Property<int>("UserId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasColumnName("user_id");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<int>("UserId"));

                    b.Property<DateTime?>("CreatedAt")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("timestamp without time zone")
                        .HasColumnName("created_at")
                        .HasDefaultValueSql("now()");

                    b.Property<string>("Password")
                        .HasColumnType("character varying")
                        .HasColumnName("password");

                    b.Property<string>("PasswordSalt")
                        .HasColumnType("character varying")
                        .HasColumnName("password_salt");

                    b.Property<int?>("PersonId")
                        .HasColumnType("integer")
                        .HasColumnName("person_id");

                    b.Property<int?>("RoleId")
                        .HasColumnType("integer")
                        .HasColumnName("role_id");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp without time zone")
                        .HasColumnName("updated_at");

                    b.HasKey("UserId")
                        .HasName("pk_user_id");

                    b.HasIndex(new[] { "PersonId" }, "user_person_id_key")
                        .IsUnique();

                    b.HasIndex(new[] { "RoleId" }, "user_role_id_key")
                        .IsUnique();

                    b.ToTable("user", (string)null);
                });

            modelBuilder.Entity("ProjetSessionBackend.Core.Client", b =>
                {
                    b.HasOne("ProjetSessionBackend.Core.Person", "Person")
                        .WithOne("Client")
                        .HasForeignKey("ProjetSessionBackend.Core.Client", "PersonId")
                        .HasConstraintName("fk_client_person_id");

                    b.HasOne("ProjetSessionBackend.Core.User", "User")
                        .WithOne("Client")
                        .HasForeignKey("ProjetSessionBackend.Core.Client", "UserId");

                    b.Navigation("Person");

                    b.Navigation("User");
                });

            modelBuilder.Entity("ProjetSessionBackend.Core.MenuMenuItem", b =>
                {
                    b.HasOne("ProjetSessionBackend.Core.Menu", "Menu")
                        .WithMany("MenuItems")
                        .HasForeignKey("MenuId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("ProjetSessionBackend.Core.MenuItem", "MenuItem")
                        .WithMany("Menus")
                        .HasForeignKey("MenuItemId")
                        .IsRequired()
                        .HasConstraintName("fk_menu_menu_item_menu_item");

                    b.Navigation("Menu");

                    b.Navigation("MenuItem");
                });

            modelBuilder.Entity("ProjetSessionBackend.Core.Order", b =>
                {
                    b.HasOne("ProjetSessionBackend.Core.Client", "Client")
                        .WithOne("Order")
                        .HasForeignKey("ProjetSessionBackend.Core.Order", "ClientId")
                        .HasConstraintName("fk_client_id");

                    b.Navigation("Client");
                });

            modelBuilder.Entity("ProjetSessionBackend.Core.Restaurant", b =>
                {
                    b.HasOne("ProjetSessionBackend.Core.Menu", "Menu")
                        .WithMany()
                        .HasForeignKey("MenuId");

                    b.Navigation("Menu");
                });

            modelBuilder.Entity("ProjetSessionBackend.Core.User", b =>
                {
                    b.HasOne("ProjetSessionBackend.Core.Person", "Person")
                        .WithOne("UserPerson")
                        .HasForeignKey("ProjetSessionBackend.Core.User", "PersonId")
                        .HasConstraintName("fk_user_person_id");

                    b.HasOne("ProjetSessionBackend.Core.Person", "Role")
                        .WithOne("UserRole")
                        .HasForeignKey("ProjetSessionBackend.Core.User", "RoleId")
                        .HasConstraintName("fk_user_role_id");

                    b.Navigation("Person");

                    b.Navigation("Role");
                });

            modelBuilder.Entity("ProjetSessionBackend.Core.Client", b =>
                {
                    b.Navigation("Order");
                });

            modelBuilder.Entity("ProjetSessionBackend.Core.Menu", b =>
                {
                    b.Navigation("MenuItems");
                });

            modelBuilder.Entity("ProjetSessionBackend.Core.MenuItem", b =>
                {
                    b.Navigation("Menus");
                });

            modelBuilder.Entity("ProjetSessionBackend.Core.Person", b =>
                {
                    b.Navigation("Client");

                    b.Navigation("UserPerson");

                    b.Navigation("UserRole");
                });

            modelBuilder.Entity("ProjetSessionBackend.Core.User", b =>
                {
                    b.Navigation("Client");
                });
#pragma warning restore 612, 618
        }
    }
}
