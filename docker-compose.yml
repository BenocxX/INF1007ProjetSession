version: "3.7"

services:
  database:
    build:
      dockerfile: ./Docker/PostgreSQL/Dockerfile
    restart: "always"
    ports:
      - 5432:5432
    environment:
      POSTGRES_DB: "projet-session"
      POSTGRES_USER: "dev"
      POSTGRES_PASSWORD: "dev"
    networks:
      - projet-session-network

  api:
    build: ProjetSessionBackend
    depends_on:
      database:
        condition: service_healthy
    ports:
      - 5000:80
    networks:
      - projet-session-network

  frontend:
    build: projet-session-frontend
    ports:
      - 5001:80

networks:
  projet-session-network:
